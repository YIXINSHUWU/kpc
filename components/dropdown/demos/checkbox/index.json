{
    "setting": {
        "title": "菜单项添加Checkbox",
        "order": 6
    },
    "catalogs": [],
    "contents": "<p>在<code>DropdownItem</code>中使用<code>Checkbox</code>，需要注意的是：</p>\n<p>如果给<code>DropdownItem</code>绑定<code>select</code>事件，该事件会触发两次，这是因为，<code>Checkbox</code>会使用<code>label</code>包裹<code>input</code>元素，两次事件，一次来源于<code>label</code>，另一次来源于<code>input</code>，所以当你需要自己在<code>select</code>中处理选中的值时，需要阻止<code>label</code> <code>click</code>事件的默认行为</p>\n<blockquote>\n<p><code>Radio</code>也类似</p>\n</blockquote>\n",
    "index": 271,
    "highlighted": [
        {
            "language": "vdt",
            "content": "<pre><code class=\"hljs jsx\"><span class=\"hljs-keyword\">import</span> {Dropdown, DropdownMenu, DropdownItem} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc/components/dropdown'</span>;\n<span class=\"hljs-keyword\">import</span> Checkbox <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc/components/checkbox'</span>;\n<span class=\"hljs-keyword\">import</span> Button <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc/components/button'</span>;\n\n<span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Dropdown</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Button</span>&gt;</span>More &gt;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Button</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">DropdownMenu</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"checkbox-menu\"</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">DropdownItem</span> <span class=\"hljs-attr\">hideOnSelect</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">false</span> }} <span class=\"hljs-attr\">ev-select</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">self._onSelect</span> }}&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Checkbox</span> <span class=\"hljs-attr\">v-model</span>=<span class=\"hljs-string\">\"checked\"</span> <span class=\"hljs-attr\">trueValue</span>=<span class=\"hljs-string\">\"1\"</span>&gt;</span>item 1<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Checkbox</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">DropdownItem</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">DropdownItem</span> <span class=\"hljs-attr\">hideOnSelect</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">false</span> }} <span class=\"hljs-attr\">ev-select</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">self._onSelectAndPreventDefault</span> }}&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Checkbox</span> <span class=\"hljs-attr\">v-model</span>=<span class=\"hljs-string\">\"checked\"</span> <span class=\"hljs-attr\">trueValue</span>=<span class=\"hljs-string\">\"2\"</span>&gt;</span>item 2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Checkbox</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">DropdownItem</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">DropdownItem</span> <span class=\"hljs-attr\">hideOnSelect</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">false</span> }}&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Checkbox</span> <span class=\"hljs-attr\">v-model</span>=<span class=\"hljs-string\">\"checked\"</span> <span class=\"hljs-attr\">trueValue</span>=<span class=\"hljs-string\">\"3\"</span>&gt;</span>item 3<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Checkbox</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">DropdownItem</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">DropdownMenu</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Dropdown</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span></code></pre>"
        },
        {
            "language": "js",
            "content": "<pre><code class=\"hljs js\"><span class=\"hljs-keyword\">import</span> Intact <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'intact'</span>;\n<span class=\"hljs-keyword\">import</span> template <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'./index.vdt'</span>;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Intact</span> </span>{\n    @Intact.template()\n    <span class=\"hljs-keyword\">static</span> template = template;\n\n    defaults() {\n        <span class=\"hljs-keyword\">return</span> { <span class=\"hljs-attr\">checked</span>: [] };\n    }\n\n    _onSelect(c, e) {\n        <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'allowDefault'</span>, e);\n    }\n\n    _onSelectAndPreventDefault(c, e) {\n        e.preventDefault();\n        <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'preventDefault'</span>, e);\n\n        <span class=\"hljs-keyword\">const</span> checked = <span class=\"hljs-keyword\">this</span>.get(<span class=\"hljs-string\">'checked'</span>).slice(<span class=\"hljs-number\">0</span>);\n        <span class=\"hljs-keyword\">const</span> index = checked.indexOf(<span class=\"hljs-string\">'2'</span>);\n        <span class=\"hljs-keyword\">if</span> (index &gt; <span class=\"hljs-number\">-1</span>) {\n            checked.splice(index, <span class=\"hljs-number\">1</span>);\n        } <span class=\"hljs-keyword\">else</span> {\n            checked.push(<span class=\"hljs-string\">'2'</span>);\n        }\n        <span class=\"hljs-keyword\">this</span>.set(<span class=\"hljs-string\">'checked'</span>, checked);\n    }\n}</code></pre>"
        },
        {
            "language": "vue",
            "content": "<pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Dropdown</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Button</span>&gt;</span>More &gt;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Button</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">DropdownMenu</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"checkbox-menu\"</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">DropdownItem</span> <span class=\"hljs-attr\">:hideOnSelect</span>=<span class=\"hljs-string\">\"false\"</span> @<span class=\"hljs-attr\">select</span>=<span class=\"hljs-string\">\"_onSelect\"</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Checkbox</span> <span class=\"hljs-attr\">v-model</span>=<span class=\"hljs-string\">\"checked\"</span> <span class=\"hljs-attr\">trueValue</span>=<span class=\"hljs-string\">\"1\"</span>&gt;</span>item 1<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Checkbox</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">DropdownItem</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">DropdownItem</span> <span class=\"hljs-attr\">:hideOnSelect</span>=<span class=\"hljs-string\">\"false\"</span> @<span class=\"hljs-attr\">select</span>=<span class=\"hljs-string\">\"_onSelectAndPreventDefault\"</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Checkbox</span> <span class=\"hljs-attr\">v-model</span>=<span class=\"hljs-string\">\"checked\"</span> <span class=\"hljs-attr\">trueValue</span>=<span class=\"hljs-string\">\"2\"</span>&gt;</span>item 2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Checkbox</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">DropdownItem</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">DropdownItem</span> <span class=\"hljs-attr\">:hideOnSelect</span>=<span class=\"hljs-string\">\"false\"</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Checkbox</span> <span class=\"hljs-attr\">v-model</span>=<span class=\"hljs-string\">\"checked\"</span> <span class=\"hljs-attr\">trueValue</span>=<span class=\"hljs-string\">\"3\"</span>&gt;</span>item 3<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Checkbox</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">DropdownItem</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">DropdownMenu</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Dropdown</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"javascript\">\n<span class=\"hljs-keyword\">import</span> {Dropdown, DropdownMenu, DropdownItem} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc-vue/components/dropdown'</span>;\n<span class=\"hljs-keyword\">import</span> Checkbox <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc-vue/components/checkbox'</span>;\n<span class=\"hljs-keyword\">import</span> Button <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc-vue/components/button'</span>;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> {\n    <span class=\"hljs-attr\">components</span>: {\n        Dropdown, DropdownMenu, DropdownItem, Checkbox, Button\n    },\n    data() {\n        <span class=\"hljs-keyword\">return</span> {\n            <span class=\"hljs-string\">\"checked\"</span>: []\n        }\n    },\n    <span class=\"hljs-attr\">methods</span>: {\n        _onSelect(c, e) {\n            <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'allowDefault'</span>, e);\n        },\n        _onSelectAndPreventDefault(c, e) {\n            e.preventDefault();\n            <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'preventDefault'</span>, e);\n        \n            <span class=\"hljs-keyword\">const</span> checked = <span class=\"hljs-keyword\">this</span>.checked;\n            <span class=\"hljs-keyword\">const</span> index = checked.indexOf(<span class=\"hljs-string\">'2'</span>);\n            <span class=\"hljs-keyword\">if</span> (index &gt; <span class=\"hljs-number\">-1</span>) {\n                checked.splice(index, <span class=\"hljs-number\">1</span>);\n            } <span class=\"hljs-keyword\">else</span> {\n                checked.push(<span class=\"hljs-string\">'2'</span>);\n            }\n        },\n    },\n}\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span></code></pre>"
        },
        {
            "language": "jsx",
            "content": "<pre><code class=\"hljs jsx\"><span class=\"hljs-keyword\">import</span> React <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'react'</span>;\n<span class=\"hljs-keyword\">import</span> {Dropdown, DropdownMenu, DropdownItem} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc-react/components/dropdown'</span>;\n<span class=\"hljs-keyword\">import</span> Checkbox <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc-react/components/checkbox'</span>;\n<span class=\"hljs-keyword\">import</span> Button <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc-react/components/button'</span>;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Demo</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">React</span>.<span class=\"hljs-title\">Component</span> </span>{\n    <span class=\"hljs-keyword\">constructor</span>(props) {\n        <span class=\"hljs-keyword\">super</span>(props);\n        <span class=\"hljs-keyword\">this</span>.state = {\n            <span class=\"hljs-string\">\"checked\"</span>: []\n        };\n        <span class=\"hljs-keyword\">this</span>._onSelect = <span class=\"hljs-keyword\">this</span>._onSelect.bind(<span class=\"hljs-keyword\">this</span>);\n        <span class=\"hljs-keyword\">this</span>._onSelectAndPreventDefault = <span class=\"hljs-keyword\">this</span>._onSelectAndPreventDefault.bind(<span class=\"hljs-keyword\">this</span>);\n    }\n\n    _onSelect(c, e) {\n        <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'allowDefault'</span>, e);\n    }\n    \n    _onSelectAndPreventDefault(c, e) {\n        e.preventDefault();\n        <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'preventDefault'</span>, e);\n    \n        <span class=\"hljs-keyword\">const</span> checked = <span class=\"hljs-keyword\">this</span>.state.checked.slice(<span class=\"hljs-number\">0</span>);\n        <span class=\"hljs-keyword\">const</span> index = checked.indexOf(<span class=\"hljs-string\">'2'</span>);\n        <span class=\"hljs-keyword\">if</span> (index &gt; <span class=\"hljs-number\">-1</span>) {\n            checked.splice(index, <span class=\"hljs-number\">1</span>);\n        } <span class=\"hljs-keyword\">else</span> {\n            checked.push(<span class=\"hljs-string\">'2'</span>);\n        }\n        <span class=\"hljs-keyword\">this</span>.setState({<span class=\"hljs-attr\">checked</span>: checked});\n    }\n    \n    render() {\n        <span class=\"hljs-keyword\">return</span> (\n            <span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Dropdown</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Button</span>&gt;</span>More &gt;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Button</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">DropdownMenu</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"checkbox-menu\"</span>&gt;</span>\n                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">DropdownItem</span> <span class=\"hljs-attr\">hideOnSelect</span>=<span class=\"hljs-string\">{false}</span> <span class=\"hljs-attr\">onSelect</span>=<span class=\"hljs-string\">{this._onSelect}</span>&gt;</span>\n                            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Checkbox</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">{this.state.checked}</span> <span class=\"hljs-attr\">on</span>$<span class=\"hljs-attr\">change-value</span>=<span class=\"hljs-string\">{(c,</span> <span class=\"hljs-attr\">checked</span>) =&gt;</span> this.setState({checked})} trueValue=\"1\"&gt;item 1<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Checkbox</span>&gt;</span>\n                        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">DropdownItem</span>&gt;</span>\n                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">DropdownItem</span> <span class=\"hljs-attr\">hideOnSelect</span>=<span class=\"hljs-string\">{false}</span> <span class=\"hljs-attr\">onSelect</span>=<span class=\"hljs-string\">{this._onSelectAndPreventDefault}</span>&gt;</span>\n                            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Checkbox</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">{this.state.checked}</span> <span class=\"hljs-attr\">on</span>$<span class=\"hljs-attr\">change-value</span>=<span class=\"hljs-string\">{(c,</span> <span class=\"hljs-attr\">checked</span>) =&gt;</span> this.setState({checked})} trueValue=\"2\"&gt;item 2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Checkbox</span>&gt;</span>\n                        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">DropdownItem</span>&gt;</span>\n                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">DropdownItem</span> <span class=\"hljs-attr\">hideOnSelect</span>=<span class=\"hljs-string\">{false}</span>&gt;</span>\n                            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Checkbox</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">{this.state.checked}</span> <span class=\"hljs-attr\">on</span>$<span class=\"hljs-attr\">change-value</span>=<span class=\"hljs-string\">{(c,</span> <span class=\"hljs-attr\">checked</span>) =&gt;</span> this.setState({checked})} trueValue=\"3\"&gt;item 3<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Checkbox</span>&gt;</span>\n                        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">DropdownItem</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">DropdownMenu</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Dropdown</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n        )\n    }\n}</code></pre>"
        },
        {
            "language": "ts",
            "content": "<pre><code class=\"hljs ts\"><span class=\"hljs-keyword\">import</span> {Component} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'@angular/core'</span>;\n\n<span class=\"hljs-meta\">@Component</span>({\n    selector: <span class=\"hljs-string\">'app-demo'</span>,\n    template: <span class=\"hljs-string\">`\n        &lt;div&gt;\n            &lt;k-dropdown&gt;\n                &lt;k-button&gt;More &gt;&lt;/k-button&gt;\n                &lt;k-dropdown-menu class=\"checkbox-menu\"&gt;\n                    &lt;k-dropdown-item [hideOnSelect]=\"false\" (select)=\"_onSelect($event)\"&gt;\n                        &lt;k-checkbox [(value)]=\"checked\" trueValue=\"1\"&gt;item 1&lt;/k-checkbox&gt;\n                    &lt;/k-dropdown-item&gt;\n                    &lt;k-dropdown-item [hideOnSelect]=\"false\" (select)=\"_onSelectAndPreventDefault($event)\"&gt;\n                        &lt;k-checkbox [(value)]=\"checked\" trueValue=\"2\"&gt;item 2&lt;/k-checkbox&gt;\n                    &lt;/k-dropdown-item&gt;\n                    &lt;k-dropdown-item [hideOnSelect]=\"false\"&gt;\n                        &lt;k-checkbox [(value)]=\"checked\" trueValue=\"3\"&gt;item 3&lt;/k-checkbox&gt;\n                    &lt;/k-dropdown-item&gt;\n                &lt;/k-dropdown-menu&gt;\n            &lt;/k-dropdown&gt;\n        &lt;/div&gt;\n    `</span>,\n})\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">class</span> AppDemoComponent {\n    <span class=\"hljs-keyword\">private</span> checked = [];\n\n    _onSelect([c, e]) {\n        <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'allowDefault'</span>, e);\n    }\n    \n    _onSelectAndPreventDefault([c, e]) {\n        e.preventDefault();\n        <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'preventDefault'</span>, e);\n    \n        <span class=\"hljs-keyword\">const</span> checked = <span class=\"hljs-keyword\">this</span>.checked.slice(<span class=\"hljs-number\">0</span>);\n        <span class=\"hljs-keyword\">const</span> index = checked.indexOf(<span class=\"hljs-string\">'2'</span>);\n        <span class=\"hljs-keyword\">if</span> (index &gt; <span class=\"hljs-number\">-1</span>) {\n            checked.splice(index, <span class=\"hljs-number\">1</span>);\n        } <span class=\"hljs-keyword\">else</span> {\n            checked.push(<span class=\"hljs-string\">'2'</span>);\n        }\n        <span class=\"hljs-keyword\">this</span>.checked = checked;\n    }\n}</code></pre>"
        }
    ]
}