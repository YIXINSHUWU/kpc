{
    "setting": {
        "title": "自定义搜索",
        "order": 1.1
    },
    "catalogs": [],
    "contents": "<p>我们可以通过<code>filter</code>扩展点自定义搜索内容，而且通过该扩展点的参数<code>type</code>，可以给左侧/右侧/两侧定义不同的内容</p>\n",
    "index": 110,
    "highlighted": [
        {
            "language": "vdt",
            "content": "<pre><code class=\"hljs jsx\"><span class=\"hljs-keyword\">import</span> Transfer <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc/components/transfer'</span>;\n<span class=\"hljs-keyword\">import</span> Input <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc/components/input'</span>;\n<span class=\"hljs-keyword\">import</span> {Select, Option} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc/components/select'</span>;\n<span class=\"hljs-keyword\">import</span> Tag <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc/components/tag'</span>;\n\n&lt;div&gt;\n    &lt;Transfer data={{ self.get('data') }} \n        filterable\n        keyName=\"name\"\n        v-model=\"value\"\n        ref=\"__test\"\n    &gt;\n        &lt;b:filter params=\"type\"&gt;\n            &lt;Input v-if={{ type === 'left' }} size=\"small\"\n                placeholder=\"请输入\"\n                clearable\n                v-model=\"keywords\"\n            &gt;\n                &lt;b:prepend&gt;\n                    &lt;Select v-model=\"policy\" width=\"100\" size=\"small\"&gt;\n                        &lt;Option value=\"all\"&gt;全部策略&lt;/Option&gt;\n                        &lt;Option value=\"system\"&gt;系统策略&lt;/Option&gt;\n                        &lt;Option value=\"common\"&gt;通用策略&lt;/Option&gt;\n                    &lt;/Select&gt;\n                &lt;/b:prepend&gt;\n            &lt;/Input&gt;\n        &lt;/b:filter&gt;\n        &lt;b:label params=\"data, index, type\"&gt;\n            &lt;div&gt;\n                &lt;div&gt;\n                    {{ data.name }}\n                    &lt;Tag type=\"warning\" size=\"mini\" v-if={{ data.policy === 'system' }}&gt;系统策略&lt;/Tag&gt;\n                &lt;/div&gt;\n                &lt;p&gt;{{ data.members }}人 / {{ data.desc }}&lt;/p&gt;\n            &lt;/div&gt;\n        &lt;/b:label&gt;\n    &lt;/Transfer&gt;\n    &lt;p&gt;You selected: {{ JSON.stringify(self.get('value')) }}&lt;/p&gt;\n&lt;/div&gt;</code></pre>"
        },
        {
            "language": "styl",
            "content": "<pre><code class=\"hljs styl\"><span class=\"hljs-selector-class\">.k-tag</span>\n    <span class=\"hljs-attribute\">margin-left</span> <span class=\"hljs-number\">5px</span></code></pre>"
        },
        {
            "language": "js",
            "content": "<pre><code class=\"hljs js\"><span class=\"hljs-keyword\">import</span> Intact <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'intact'</span>;\n<span class=\"hljs-keyword\">import</span> template <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'./index.vdt'</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">'./index.styl'</span>; \n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">mockApi</span>(<span class=\"hljs-params\">policy</span>) </span>{\n    <span class=\"hljs-keyword\">const</span> data = [\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'AdministratorAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'system'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'OSSFullAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'SupportFullAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'BSSFullSupportAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>, <span class=\"hljs-attr\">disabled</span>: <span class=\"hljs-literal\">true</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'SystemFullAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'system'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'CommonAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n    ];\n\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Promise</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">resolve</span> =&gt;</span> {\n        setTimeout(<span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> {\n            <span class=\"hljs-keyword\">if</span> (policy === <span class=\"hljs-string\">'all'</span>) resolve(data);\n            <span class=\"hljs-keyword\">else</span> resolve(data.filter(<span class=\"hljs-function\"><span class=\"hljs-params\">item</span> =&gt;</span> item.policy === policy));\n        }, <span class=\"hljs-number\">500</span>);\n    });\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Intact</span> </span>{\n    @Intact.template()\n    <span class=\"hljs-keyword\">static</span> template = template;\n\n    defaults() {\n        <span class=\"hljs-keyword\">return</span> {\n            <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'all'</span>,\n            <span class=\"hljs-attr\">data</span>: []\n        }\n    }\n\n    _init() {\n        <span class=\"hljs-comment\">// when policy changed, fetch data</span>\n        <span class=\"hljs-keyword\">this</span>.on(<span class=\"hljs-string\">'$change:policy'</span>, <span class=\"hljs-keyword\">this</span>._fetch);\n        <span class=\"hljs-keyword\">this</span>.on(<span class=\"hljs-string\">'$change:keywords'</span>, <span class=\"hljs-keyword\">this</span>._filter);\n        <span class=\"hljs-keyword\">this</span>._fetch();\n    }\n\n    _fetch() {\n        mockApi(<span class=\"hljs-keyword\">this</span>.get(<span class=\"hljs-string\">'policy'</span>)).then(<span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> {\n            <span class=\"hljs-keyword\">this</span>.originData = data;\n            <span class=\"hljs-keyword\">this</span>._filter();\n        });\n    }\n\n    _filter() {\n        <span class=\"hljs-keyword\">const</span> keywords = <span class=\"hljs-keyword\">this</span>.get(<span class=\"hljs-string\">'keywords'</span>);\n        <span class=\"hljs-keyword\">const</span> data = keywords ? \n            <span class=\"hljs-keyword\">this</span>.originData.filter(<span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> {\n                <span class=\"hljs-keyword\">return</span> data.name.includes(keywords);\n            }) :\n            <span class=\"hljs-keyword\">this</span>.originData;\n        <span class=\"hljs-keyword\">this</span>.set(<span class=\"hljs-string\">'data'</span>, data);\n    }\n}</code></pre>"
        },
        {
            "language": "vue",
            "content": "<pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Transfer</span> <span class=\"hljs-attr\">:data</span>=<span class=\"hljs-string\">\"data\"</span> \n            <span class=\"hljs-attr\">filterable</span>\n            <span class=\"hljs-attr\">keyName</span>=<span class=\"hljs-string\">\"name\"</span>\n            <span class=\"hljs-attr\">v-model</span>=<span class=\"hljs-string\">\"value\"</span>\n            <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">\"__test\"</span>\n        &gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span> <span class=\"hljs-attr\">slot</span>=<span class=\"hljs-string\">\"filter\"</span> <span class=\"hljs-attr\">slot-scope</span>=<span class=\"hljs-string\">\"type\"</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Input</span> <span class=\"hljs-attr\">v-if</span>=<span class=\"hljs-string\">\"type === 'left'\"</span> <span class=\"hljs-attr\">size</span>=<span class=\"hljs-string\">\"small\"</span>\n                    <span class=\"hljs-attr\">placeholder</span>=<span class=\"hljs-string\">\"请输入\"</span>\n                    <span class=\"hljs-attr\">clearable</span>\n                    <span class=\"hljs-attr\">v-model</span>=<span class=\"hljs-string\">\"keywords\"</span>\n                &gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span> <span class=\"hljs-attr\">slot</span>=<span class=\"hljs-string\">\"prepend\"</span>&gt;</span>\n                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Select</span> <span class=\"hljs-attr\">v-model</span>=<span class=\"hljs-string\">\"policy\"</span> <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">\"100\"</span> <span class=\"hljs-attr\">size</span>=<span class=\"hljs-string\">\"small\"</span>&gt;</span>\n                            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Option</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"all\"</span>&gt;</span>全部策略<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Option</span>&gt;</span>\n                            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Option</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"system\"</span>&gt;</span>系统策略<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Option</span>&gt;</span>\n                            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Option</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"common\"</span>&gt;</span>通用策略<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Option</span>&gt;</span>\n                        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Select</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Input</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span> <span class=\"hljs-attr\">slot</span>=<span class=\"hljs-string\">\"label\"</span> <span class=\"hljs-attr\">slot-scope</span>=<span class=\"hljs-string\">\"data, index, type\"</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n                        {{ data.name }}\n                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Tag</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"warning\"</span> <span class=\"hljs-attr\">size</span>=<span class=\"hljs-string\">\"mini\"</span> <span class=\"hljs-attr\">v-if</span>=<span class=\"hljs-string\">\"data.policy === 'system'\"</span>&gt;</span>系统策略<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Tag</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>{{ data.members }}人 / {{ data.desc }}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Transfer</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>You selected: {{ stringify(value) }}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"javascript\">\n<span class=\"hljs-keyword\">import</span> Transfer <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc/components/transfer'</span>;\n<span class=\"hljs-keyword\">import</span> Input <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc/components/input'</span>;\n<span class=\"hljs-keyword\">import</span> {Select, Option} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc/components/select'</span>;\n<span class=\"hljs-keyword\">import</span> Tag <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc/components/tag'</span>;\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">mockApi</span>(<span class=\"hljs-params\">policy</span>) </span>{\n    <span class=\"hljs-keyword\">const</span> data = [\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'AdministratorAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'system'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'OSSFullAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'SupportFullAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'BSSFullSupportAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>, <span class=\"hljs-attr\">disabled</span>: <span class=\"hljs-literal\">true</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'SystemFullAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'system'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'CommonAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n    ];\n\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Promise</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">resolve</span> =&gt;</span> {\n        setTimeout(<span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> {\n            <span class=\"hljs-keyword\">if</span> (policy === <span class=\"hljs-string\">'all'</span>) resolve(data);\n            <span class=\"hljs-keyword\">else</span> resolve(data.filter(<span class=\"hljs-function\"><span class=\"hljs-params\">item</span> =&gt;</span> item.policy === policy));\n        }, <span class=\"hljs-number\">500</span>);\n    });\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> {\n    <span class=\"hljs-attr\">components</span>: {\n        Transfer, Input, Select, Option, Tag\n    },\n    data() {\n        <span class=\"hljs-keyword\">return</span> {\n            <span class=\"hljs-string\">\"data\"</span>: [],\n            <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-literal\">null</span>,\n            <span class=\"hljs-string\">\"keywords\"</span>: <span class=\"hljs-literal\">null</span>,\n            <span class=\"hljs-string\">\"policy\"</span>: <span class=\"hljs-string\">\"all\"</span>\n        }\n    },\n    <span class=\"hljs-attr\">methods</span>: {\n        stringify(data) { <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">JSON</span>.stringify(data); },\n        _fetch() {\n            mockApi(<span class=\"hljs-keyword\">this</span>.policy).then(<span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> {\n                <span class=\"hljs-keyword\">this</span>.originData = data;\n                <span class=\"hljs-keyword\">this</span>._filter();\n            });\n        },\n        _filter() {\n            <span class=\"hljs-keyword\">const</span> keywords = <span class=\"hljs-keyword\">this</span>.keywords;\n            <span class=\"hljs-keyword\">const</span> data = keywords ? \n                <span class=\"hljs-keyword\">this</span>.originData.filter(<span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> {\n                    <span class=\"hljs-keyword\">return</span> data.name.includes(keywords);\n                }) :\n                <span class=\"hljs-keyword\">this</span>.originData;\n            <span class=\"hljs-keyword\">this</span>.data = data;\n        },\n    },\n    created() {\n        <span class=\"hljs-keyword\">this</span>._fetch();\n    },\n    <span class=\"hljs-attr\">watch</span>: {\n        <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{\n            <span class=\"hljs-keyword\">this</span>._fetch();\n        },\n        <span class=\"hljs-attr\">keywords</span>: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{\n            <span class=\"hljs-keyword\">this</span>._filter();\n        },\n    },\n}\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">style</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">\"stylus\"</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">\"./index.styl\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">style</span>&gt;</span></code></pre>"
        },
        {
            "language": "jsx",
            "content": "<pre><code class=\"hljs jsx\"><span class=\"hljs-keyword\">import</span> React <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'react'</span>;\n<span class=\"hljs-keyword\">import</span> Transfer <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc/components/transfer'</span>;\n<span class=\"hljs-keyword\">import</span> Input <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc/components/input'</span>;\n<span class=\"hljs-keyword\">import</span> {Select, Option} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc/components/select'</span>;\n<span class=\"hljs-keyword\">import</span> Tag <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc/components/tag'</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">'./index.styl'</span>;\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">mockApi</span>(<span class=\"hljs-params\">policy</span>) </span>{\n    <span class=\"hljs-keyword\">const</span> data = [\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'AdministratorAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'system'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'OSSFullAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'SupportFullAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'BSSFullSupportAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>, <span class=\"hljs-attr\">disabled</span>: <span class=\"hljs-literal\">true</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'SystemFullAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'system'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'CommonAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n    ];\n\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Promise</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">resolve</span> =&gt;</span> {\n        setTimeout(<span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> {\n            <span class=\"hljs-keyword\">if</span> (policy === <span class=\"hljs-string\">'all'</span>) resolve(data);\n            <span class=\"hljs-keyword\">else</span> resolve(data.filter(<span class=\"hljs-function\"><span class=\"hljs-params\">item</span> =&gt;</span> item.policy === policy));\n        }, <span class=\"hljs-number\">500</span>);\n    });\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Demo</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">React</span>.<span class=\"hljs-title\">Component</span> </span>{\n    <span class=\"hljs-keyword\">constructor</span>(props) {\n        <span class=\"hljs-keyword\">super</span>(props);\n        <span class=\"hljs-keyword\">this</span>.state = {\n            <span class=\"hljs-string\">\"policy\"</span>: <span class=\"hljs-string\">\"all\"</span>,\n            <span class=\"hljs-string\">\"data\"</span>: []\n        };\n        <span class=\"hljs-keyword\">this</span>._fetch = <span class=\"hljs-keyword\">this</span>._fetch.bind(<span class=\"hljs-keyword\">this</span>);\n        <span class=\"hljs-keyword\">this</span>._filter = <span class=\"hljs-keyword\">this</span>._filter.bind(<span class=\"hljs-keyword\">this</span>);\n        <span class=\"hljs-keyword\">this</span>.componentDidMount = <span class=\"hljs-keyword\">this</span>.componentDidMount.bind(<span class=\"hljs-keyword\">this</span>);\n        <span class=\"hljs-keyword\">this</span>.setState = <span class=\"hljs-keyword\">this</span>.setState.bind(<span class=\"hljs-keyword\">this</span>);\n    }\n\n    _fetch() {\n        mockApi(<span class=\"hljs-keyword\">this</span>.state.policy).then(<span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> {\n            <span class=\"hljs-keyword\">this</span>.originData = data;\n            <span class=\"hljs-keyword\">this</span>._filter();\n        });\n    }\n    \n    _filter() {\n        <span class=\"hljs-keyword\">const</span> keywords = <span class=\"hljs-keyword\">this</span>.state.keywords;\n        <span class=\"hljs-keyword\">const</span> data = keywords ? \n            <span class=\"hljs-keyword\">this</span>.originData.filter(<span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> {\n                <span class=\"hljs-keyword\">return</span> data.name.includes(keywords);\n            }) :\n            <span class=\"hljs-keyword\">this</span>.originData;\n        <span class=\"hljs-keyword\">this</span>.setState({<span class=\"hljs-attr\">data</span>: data});\n    }\n    \n    componentDidMount() {\n        <span class=\"hljs-keyword\">this</span>._fetch();\n    }\n    \n    setState(state, cb) {\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-string\">'policy'</span> <span class=\"hljs-keyword\">in</span> state) {\n            <span class=\"hljs-keyword\">super</span>.setState(state, <span class=\"hljs-keyword\">this</span>._fetch);\n        } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-string\">'keywords'</span> <span class=\"hljs-keyword\">in</span> state) {\n            <span class=\"hljs-keyword\">super</span>.setState(state, <span class=\"hljs-keyword\">this</span>._filter);\n        } <span class=\"hljs-keyword\">else</span> {\n            <span class=\"hljs-keyword\">super</span>.setState(state, cb);\n        }\n    }\n    \n    render() {\n        <span class=\"hljs-keyword\">return</span> (\n            &lt;div&gt;\n                &lt;Transfer data={this.state.data}\n                    b-filter={(type) =&gt; {\n                        return &lt;React.Fragment&gt;\n                            {type === 'left' ?\n                                &lt;Input size=\"small\"\n                                    b-prepend={&lt;React.Fragment&gt;\n                                        &lt;Select value={this.state.policy} on$change-value={(c, policy) =&gt; this.setState({policy})} width=\"100\" size=\"small\"&gt;\n                                            &lt;Option value=\"all\"&gt;全部策略&lt;/Option&gt;\n                                            &lt;Option value=\"system\"&gt;系统策略&lt;/Option&gt;\n                                            &lt;Option value=\"common\"&gt;通用策略&lt;/Option&gt;\n                                        &lt;/Select&gt;\n                                    &lt;/React.Fragment&gt;}\n                                    placeholder=\"请输入\"\n                                    clearable\n                                    value={this.state.keywords}\n                                    on$change-value={(c, keywords) =&gt; this.setState({keywords})}\n                                &gt;\n                                &lt;/Input&gt; :\n                                undefined\n                            }\n                        &lt;/React.Fragment&gt;\n                    }}\n                    b-label={(data, index, type) =&gt; {\n                        return &lt;React.Fragment&gt;\n                            &lt;div&gt;\n                                &lt;div&gt;\n                                    {data.name}\n                                    {data.policy === 'system' ?\n                                        &lt;Tag type=\"warning\" size=\"mini\"&gt;系统策略&lt;/Tag&gt; :\n                                        undefined\n                                    }\n                                &lt;/div&gt;\n                                &lt;p&gt;{data.members}人 / {data.desc}&lt;/p&gt;\n                            &lt;/div&gt;\n                        &lt;/React.Fragment&gt;\n                    }}\n                    filterable\n                    keyName=\"name\"\n                    value={this.state.value}\n                    on$change-value={(c, value) =&gt; this.setState({value})}\n                    ref={i =&gt; this.__test = i}\n                &gt;\n                &lt;/Transfer&gt;\n                &lt;p&gt;You selected: {JSON.stringify(this.state.value)}&lt;/p&gt;\n            &lt;/div&gt;\n        )\n    }\n}</code></pre>"
        }
    ]
}