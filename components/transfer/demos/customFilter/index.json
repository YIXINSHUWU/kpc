{
    "setting": {
        "title": "自定义搜索",
        "order": 1.1
    },
    "catalogs": [],
    "contents": "<p>我们可以通过<code>filter</code>扩展点自定义搜索内容，而且通过该扩展点的参数<code>type</code>，可以给左侧/右侧/两侧定义不同的内容</p>\n",
    "index": 124,
    "highlighted": [
        {
            "language": "vdt",
            "content": "<pre><code class=\"hljs jsx\"><span class=\"hljs-keyword\">import</span> Transfer <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc/components/transfer'</span>;\n<span class=\"hljs-keyword\">import</span> Input <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc/components/input'</span>;\n<span class=\"hljs-keyword\">import</span> {Select, Option} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc/components/select'</span>;\n<span class=\"hljs-keyword\">import</span> Tag <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc/components/tag'</span>;\n\n<span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Transfer</span> <span class=\"hljs-attr\">data</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">self.get</span>('<span class=\"hljs-attr\">data</span>') }} \n        <span class=\"hljs-attr\">filterable</span>\n        <span class=\"hljs-attr\">keyName</span>=<span class=\"hljs-string\">\"name\"</span>\n        <span class=\"hljs-attr\">v-model</span>=<span class=\"hljs-string\">\"value\"</span>\n        <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">\"__test\"</span>\n    &gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">b:filter</span> <span class=\"hljs-attr\">params</span>=<span class=\"hljs-string\">\"type\"</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Input</span> <span class=\"hljs-attr\">v-if</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">type</span> === <span class=\"hljs-string\">'left'</span> }} <span class=\"hljs-attr\">size</span>=<span class=\"hljs-string\">\"small\"</span>\n                <span class=\"hljs-attr\">placeholder</span>=<span class=\"hljs-string\">\"请输入\"</span>\n                <span class=\"hljs-attr\">clearable</span>\n                <span class=\"hljs-attr\">v-model</span>=<span class=\"hljs-string\">\"keywords\"</span>\n            &gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">b:prepend</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Select</span> <span class=\"hljs-attr\">v-model</span>=<span class=\"hljs-string\">\"policy\"</span> <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">\"100\"</span> <span class=\"hljs-attr\">size</span>=<span class=\"hljs-string\">\"small\"</span>&gt;</span>\n                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Option</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"all\"</span>&gt;</span>全部策略<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Option</span>&gt;</span>\n                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Option</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"system\"</span>&gt;</span>系统策略<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Option</span>&gt;</span>\n                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Option</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"common\"</span>&gt;</span>通用策略<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Option</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Select</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">b:prepend</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Input</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">b:filter</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">b:label</span> <span class=\"hljs-attr\">params</span>=<span class=\"hljs-string\">\"data, index, type\"</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n                    {{ data.name }}\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Tag</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"warning\"</span> <span class=\"hljs-attr\">size</span>=<span class=\"hljs-string\">\"mini\"</span> <span class=\"hljs-attr\">v-if</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">data.policy</span> === <span class=\"hljs-string\">'system'</span> }}&gt;</span>系统策略<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Tag</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>{{ data.members }}人 / {{ data.desc }}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">b:label</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Transfer</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>You selected: {{ JSON.stringify(self.get('value')) }}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span></code></pre>"
        },
        {
            "language": "styl",
            "content": "<pre><code class=\"hljs styl\"><span class=\"hljs-selector-class\">.k-tag</span>\n    <span class=\"hljs-attribute\">margin-left</span> <span class=\"hljs-number\">5px</span></code></pre>"
        },
        {
            "language": "js",
            "content": "<pre><code class=\"hljs js\"><span class=\"hljs-keyword\">import</span> Intact <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'intact'</span>;\n<span class=\"hljs-keyword\">import</span> template <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'./index.vdt'</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">'./index.styl'</span>; \n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">mockApi</span>(<span class=\"hljs-params\">policy</span>) </span>{\n    <span class=\"hljs-keyword\">const</span> data = [\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'AdministratorAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'system'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'OSSFullAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'SupportFullAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'BSSFullSupportAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>, <span class=\"hljs-attr\">disabled</span>: <span class=\"hljs-literal\">true</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'SystemFullAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'system'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'CommonAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n    ];\n\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Promise</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">resolve</span> =&gt;</span> {\n        setTimeout(<span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> {\n            <span class=\"hljs-keyword\">if</span> (policy === <span class=\"hljs-string\">'all'</span>) resolve(data);\n            <span class=\"hljs-keyword\">else</span> resolve(data.filter(<span class=\"hljs-function\"><span class=\"hljs-params\">item</span> =&gt;</span> item.policy === policy));\n        }, <span class=\"hljs-number\">500</span>);\n    });\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Intact</span> </span>{\n    @Intact.template()\n    <span class=\"hljs-keyword\">static</span> template = template;\n\n    defaults() {\n        <span class=\"hljs-keyword\">return</span> {\n            <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'all'</span>,\n            <span class=\"hljs-attr\">data</span>: []\n        }\n    }\n\n    _init() {\n        <span class=\"hljs-comment\">// when policy changed, fetch data</span>\n        <span class=\"hljs-keyword\">this</span>.on(<span class=\"hljs-string\">'$change:policy'</span>, <span class=\"hljs-keyword\">this</span>._fetch);\n        <span class=\"hljs-keyword\">this</span>.on(<span class=\"hljs-string\">'$change:keywords'</span>, <span class=\"hljs-keyword\">this</span>._filter);\n        <span class=\"hljs-keyword\">this</span>._fetch();\n    }\n\n    _fetch() {\n        mockApi(<span class=\"hljs-keyword\">this</span>.get(<span class=\"hljs-string\">'policy'</span>)).then(<span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> {\n            <span class=\"hljs-keyword\">this</span>.originData = data;\n            <span class=\"hljs-keyword\">this</span>._filter();\n        });\n    }\n\n    _filter() {\n        <span class=\"hljs-keyword\">const</span> keywords = <span class=\"hljs-keyword\">this</span>.get(<span class=\"hljs-string\">'keywords'</span>);\n        <span class=\"hljs-keyword\">const</span> data = keywords ? \n            <span class=\"hljs-keyword\">this</span>.originData.filter(<span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> {\n                <span class=\"hljs-keyword\">return</span> data.name.includes(keywords);\n            }) :\n            <span class=\"hljs-keyword\">this</span>.originData;\n        <span class=\"hljs-keyword\">this</span>.set(<span class=\"hljs-string\">'data'</span>, data);\n    }\n}</code></pre>"
        },
        {
            "language": "vue",
            "content": "<pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Transfer</span> <span class=\"hljs-attr\">:data</span>=<span class=\"hljs-string\">\"data\"</span> \n            <span class=\"hljs-attr\">filterable</span>\n            <span class=\"hljs-attr\">keyName</span>=<span class=\"hljs-string\">\"name\"</span>\n            <span class=\"hljs-attr\">v-model</span>=<span class=\"hljs-string\">\"value\"</span>\n            <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">\"__test\"</span>\n        &gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span> <span class=\"hljs-attr\">slot</span>=<span class=\"hljs-string\">\"filter\"</span> <span class=\"hljs-attr\">slot-scope</span>=<span class=\"hljs-string\">\"type\"</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Input</span> <span class=\"hljs-attr\">v-if</span>=<span class=\"hljs-string\">\"type === 'left'\"</span> <span class=\"hljs-attr\">size</span>=<span class=\"hljs-string\">\"small\"</span>\n                    <span class=\"hljs-attr\">placeholder</span>=<span class=\"hljs-string\">\"请输入\"</span>\n                    <span class=\"hljs-attr\">clearable</span>\n                    <span class=\"hljs-attr\">v-model</span>=<span class=\"hljs-string\">\"keywords\"</span>\n                &gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span> <span class=\"hljs-attr\">slot</span>=<span class=\"hljs-string\">\"prepend\"</span>&gt;</span>\n                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Select</span> <span class=\"hljs-attr\">v-model</span>=<span class=\"hljs-string\">\"policy\"</span> <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">\"100\"</span> <span class=\"hljs-attr\">size</span>=<span class=\"hljs-string\">\"small\"</span>&gt;</span>\n                            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Option</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"all\"</span>&gt;</span>全部策略<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Option</span>&gt;</span>\n                            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Option</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"system\"</span>&gt;</span>系统策略<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Option</span>&gt;</span>\n                            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Option</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"common\"</span>&gt;</span>通用策略<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Option</span>&gt;</span>\n                        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Select</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Input</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span> <span class=\"hljs-attr\">slot</span>=<span class=\"hljs-string\">\"label\"</span> <span class=\"hljs-attr\">slot-scope</span>=<span class=\"hljs-string\">\"data, index, type\"</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n                        {{ data.name }}\n                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Tag</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"warning\"</span> <span class=\"hljs-attr\">size</span>=<span class=\"hljs-string\">\"mini\"</span> <span class=\"hljs-attr\">v-if</span>=<span class=\"hljs-string\">\"data.policy === 'system'\"</span>&gt;</span>系统策略<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Tag</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>{{ data.members }}人 / {{ data.desc }}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Transfer</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>You selected: {{ stringify(value) }}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"javascript\">\n<span class=\"hljs-keyword\">import</span> Transfer <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc-vue/components/transfer'</span>;\n<span class=\"hljs-keyword\">import</span> Input <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc-vue/components/input'</span>;\n<span class=\"hljs-keyword\">import</span> {Select, Option} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc-vue/components/select'</span>;\n<span class=\"hljs-keyword\">import</span> Tag <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc-vue/components/tag'</span>;\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">mockApi</span>(<span class=\"hljs-params\">policy</span>) </span>{\n    <span class=\"hljs-keyword\">const</span> data = [\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'AdministratorAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'system'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'OSSFullAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'SupportFullAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'BSSFullSupportAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>, <span class=\"hljs-attr\">disabled</span>: <span class=\"hljs-literal\">true</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'SystemFullAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'system'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'CommonAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n    ];\n\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Promise</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">resolve</span> =&gt;</span> {\n        setTimeout(<span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> {\n            <span class=\"hljs-keyword\">if</span> (policy === <span class=\"hljs-string\">'all'</span>) resolve(data);\n            <span class=\"hljs-keyword\">else</span> resolve(data.filter(<span class=\"hljs-function\"><span class=\"hljs-params\">item</span> =&gt;</span> item.policy === policy));\n        }, <span class=\"hljs-number\">500</span>);\n    });\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> {\n    <span class=\"hljs-attr\">components</span>: {\n        Transfer, Input, Select, Option, Tag\n    },\n    data() {\n        <span class=\"hljs-keyword\">return</span> {\n            <span class=\"hljs-string\">\"data\"</span>: [],\n            <span class=\"hljs-string\">\"value\"</span>: <span class=\"hljs-literal\">null</span>,\n            <span class=\"hljs-string\">\"keywords\"</span>: <span class=\"hljs-literal\">null</span>,\n            <span class=\"hljs-string\">\"policy\"</span>: <span class=\"hljs-string\">\"all\"</span>\n        }\n    },\n    <span class=\"hljs-attr\">methods</span>: {\n        stringify(data) { <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">JSON</span>.stringify(data); },\n        _fetch() {\n            mockApi(<span class=\"hljs-keyword\">this</span>.policy).then(<span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> {\n                <span class=\"hljs-keyword\">this</span>.originData = data;\n                <span class=\"hljs-keyword\">this</span>._filter();\n            });\n        },\n        _filter() {\n            <span class=\"hljs-keyword\">const</span> keywords = <span class=\"hljs-keyword\">this</span>.keywords;\n            <span class=\"hljs-keyword\">const</span> data = keywords ? \n                <span class=\"hljs-keyword\">this</span>.originData.filter(<span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> {\n                    <span class=\"hljs-keyword\">return</span> data.name.includes(keywords);\n                }) :\n                <span class=\"hljs-keyword\">this</span>.originData;\n            <span class=\"hljs-keyword\">this</span>.data = data;\n        },\n    },\n    created() {\n        <span class=\"hljs-keyword\">this</span>._fetch();\n    },\n    <span class=\"hljs-attr\">watch</span>: {\n        <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{\n            <span class=\"hljs-keyword\">this</span>._fetch();\n        },\n        <span class=\"hljs-attr\">keywords</span>: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{\n            <span class=\"hljs-keyword\">this</span>._filter();\n        },\n    },\n}\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">style</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">\"stylus\"</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">\"./index.styl\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">style</span>&gt;</span></code></pre>"
        },
        {
            "language": "jsx",
            "content": "<pre><code class=\"hljs jsx\"><span class=\"hljs-keyword\">import</span> React <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'react'</span>;\n<span class=\"hljs-keyword\">import</span> Transfer <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc-react/components/transfer'</span>;\n<span class=\"hljs-keyword\">import</span> Input <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc-react/components/input'</span>;\n<span class=\"hljs-keyword\">import</span> {Select, Option} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc-react/components/select'</span>;\n<span class=\"hljs-keyword\">import</span> Tag <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'kpc-react/components/tag'</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">'./index.styl'</span>;\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">mockApi</span>(<span class=\"hljs-params\">policy</span>) </span>{\n    <span class=\"hljs-keyword\">const</span> data = [\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'AdministratorAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'system'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'OSSFullAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'SupportFullAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'BSSFullSupportAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>, <span class=\"hljs-attr\">disabled</span>: <span class=\"hljs-literal\">true</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'SystemFullAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'system'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {<span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'CommonAccess'</span>, <span class=\"hljs-attr\">policy</span>: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, <span class=\"hljs-attr\">desc</span>: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n    ];\n\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Promise</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">resolve</span> =&gt;</span> {\n        setTimeout(<span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> {\n            <span class=\"hljs-keyword\">if</span> (policy === <span class=\"hljs-string\">'all'</span>) resolve(data);\n            <span class=\"hljs-keyword\">else</span> resolve(data.filter(<span class=\"hljs-function\"><span class=\"hljs-params\">item</span> =&gt;</span> item.policy === policy));\n        }, <span class=\"hljs-number\">500</span>);\n    });\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Demo</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">React</span>.<span class=\"hljs-title\">Component</span> </span>{\n    <span class=\"hljs-keyword\">constructor</span>(props) {\n        <span class=\"hljs-keyword\">super</span>(props);\n        <span class=\"hljs-keyword\">this</span>.state = {\n            <span class=\"hljs-string\">\"policy\"</span>: <span class=\"hljs-string\">\"all\"</span>,\n            <span class=\"hljs-string\">\"data\"</span>: []\n        };\n        <span class=\"hljs-keyword\">this</span>._fetch = <span class=\"hljs-keyword\">this</span>._fetch.bind(<span class=\"hljs-keyword\">this</span>);\n        <span class=\"hljs-keyword\">this</span>._filter = <span class=\"hljs-keyword\">this</span>._filter.bind(<span class=\"hljs-keyword\">this</span>);\n        <span class=\"hljs-keyword\">this</span>.componentDidMount = <span class=\"hljs-keyword\">this</span>.componentDidMount.bind(<span class=\"hljs-keyword\">this</span>);\n        <span class=\"hljs-keyword\">this</span>.setState = <span class=\"hljs-keyword\">this</span>.setState.bind(<span class=\"hljs-keyword\">this</span>);\n    }\n\n    _fetch() {\n        mockApi(<span class=\"hljs-keyword\">this</span>.state.policy).then(<span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> {\n            <span class=\"hljs-keyword\">this</span>.originData = data;\n            <span class=\"hljs-keyword\">this</span>._filter();\n        });\n    }\n    \n    _filter() {\n        <span class=\"hljs-keyword\">const</span> keywords = <span class=\"hljs-keyword\">this</span>.state.keywords;\n        <span class=\"hljs-keyword\">const</span> data = keywords ? \n            <span class=\"hljs-keyword\">this</span>.originData.filter(<span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> {\n                <span class=\"hljs-keyword\">return</span> data.name.includes(keywords);\n            }) :\n            <span class=\"hljs-keyword\">this</span>.originData;\n        <span class=\"hljs-keyword\">this</span>.setState({<span class=\"hljs-attr\">data</span>: data});\n    }\n    \n    componentDidMount() {\n        <span class=\"hljs-keyword\">this</span>._fetch();\n    }\n    \n    setState(state, cb) {\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-string\">'policy'</span> <span class=\"hljs-keyword\">in</span> state) {\n            <span class=\"hljs-keyword\">super</span>.setState(state, <span class=\"hljs-keyword\">this</span>._fetch);\n        } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-string\">'keywords'</span> <span class=\"hljs-keyword\">in</span> state) {\n            <span class=\"hljs-keyword\">super</span>.setState(state, <span class=\"hljs-keyword\">this</span>._filter);\n        } <span class=\"hljs-keyword\">else</span> {\n            <span class=\"hljs-keyword\">super</span>.setState(state, cb);\n        }\n    }\n    \n    render() {\n        <span class=\"hljs-keyword\">return</span> (\n            <span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Transfer</span> <span class=\"hljs-attr\">data</span>=<span class=\"hljs-string\">{this.state.data}</span>\n                    <span class=\"hljs-attr\">b-filter</span>=<span class=\"hljs-string\">{(type)</span> =&gt;</span> {\n                        return <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">React.Fragment</span>&gt;</span>\n                            {type === 'left' ?\n                                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Input</span> <span class=\"hljs-attr\">size</span>=<span class=\"hljs-string\">\"small\"</span>\n                                    <span class=\"hljs-attr\">b-prepend</span>=<span class=\"hljs-string\">{</span>&lt;<span class=\"hljs-attr\">React.Fragment</span>&gt;</span>\n                                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Select</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">{this.state.policy}</span> <span class=\"hljs-attr\">on</span>$<span class=\"hljs-attr\">change-value</span>=<span class=\"hljs-string\">{(c,</span> <span class=\"hljs-attr\">policy</span>) =&gt;</span> this.setState({policy})} width=\"100\" size=\"small\"&gt;\n                                            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Option</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"all\"</span>&gt;</span>全部策略<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Option</span>&gt;</span>\n                                            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Option</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"system\"</span>&gt;</span>系统策略<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Option</span>&gt;</span>\n                                            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Option</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"common\"</span>&gt;</span>通用策略<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Option</span>&gt;</span>\n                                        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Select</span>&gt;</span>\n                                    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">React.Fragment</span>&gt;</span>}\n                                    placeholder=\"请输入\"\n                                    clearable\n                                    value={this.state.keywords}\n                                    on$change-value={(c, keywords) =&gt; this.setState({keywords})}\n                                &gt;\n                                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Input</span>&gt;</span> :\n                                undefined\n                            }\n                        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">React.Fragment</span>&gt;</span>\n                    }}\n                    b-label={(data, index, type) =&gt; {\n                        return <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">React.Fragment</span>&gt;</span>\n                            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n                                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n                                    {data.name}\n                                    {data.policy === 'system' ?\n                                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Tag</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"warning\"</span> <span class=\"hljs-attr\">size</span>=<span class=\"hljs-string\">\"mini\"</span>&gt;</span>系统策略<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Tag</span>&gt;</span> :\n                                        undefined\n                                    }\n                                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n                                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>{data.members}人 / {data.desc}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n                            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n                        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">React.Fragment</span>&gt;</span>\n                    }}\n                    filterable\n                    keyName=\"name\"\n                    value={this.state.value}\n                    on$change-value={(c, value) =&gt; this.setState({value})}\n                    ref={i =&gt; this.__test = i}\n                &gt;\n                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Transfer</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>You selected: {JSON.stringify(this.state.value)}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n        )\n    }\n}</code></pre>"
        },
        {
            "language": "ts",
            "content": "<pre><code class=\"hljs ts\"><span class=\"hljs-keyword\">import</span> {Component, ViewChild} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'@angular/core'</span>;\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">mockApi</span>(<span class=\"hljs-params\">policy</span>) </span>{\n    <span class=\"hljs-keyword\">const</span> data = [\n        {name: <span class=\"hljs-string\">'AdministratorAccess'</span>, policy: <span class=\"hljs-string\">'system'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, desc: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {name: <span class=\"hljs-string\">'OSSFullAccess'</span>, policy: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, desc: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {name: <span class=\"hljs-string\">'SupportFullAccess'</span>, policy: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, desc: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {name: <span class=\"hljs-string\">'BSSFullSupportAccess'</span>, policy: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, desc: <span class=\"hljs-string\">'管理所有资源的权限'</span>, disabled: <span class=\"hljs-literal\">true</span>},\n        {name: <span class=\"hljs-string\">'SystemFullAccess'</span>, policy: <span class=\"hljs-string\">'system'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, desc: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n        {name: <span class=\"hljs-string\">'CommonAccess'</span>, policy: <span class=\"hljs-string\">'common'</span>, <span class=\"hljs-string\">'members'</span>: <span class=\"hljs-number\">11</span>, desc: <span class=\"hljs-string\">'管理所有资源的权限'</span>},\n    ];\n\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Promise</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">resolve</span> =&gt;</span> {\n        setTimeout(<span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> {\n            <span class=\"hljs-keyword\">if</span> (policy === <span class=\"hljs-string\">'all'</span>) resolve(data);\n            <span class=\"hljs-keyword\">else</span> resolve(data.filter(<span class=\"hljs-function\"><span class=\"hljs-params\">item</span> =&gt;</span> item.policy === policy));\n        }, <span class=\"hljs-number\">500</span>);\n    });\n}\n\n\n<span class=\"hljs-meta\">@Component</span>({\n    selector: <span class=\"hljs-string\">'app-demo'</span>,\n    template: <span class=\"hljs-string\">`\n        &lt;div&gt;\n            &lt;k-transfer [data]=\"data\" \n                [filterable]=\"true\"\n                keyName=\"name\"\n                [(value)]=\"value\"\n                #__test\n            &gt;\n                &lt;ng-template #filter let-type=\"args[0]\"&gt;\n                    &lt;k-input *ngIf=\"type === 'left'\" size=\"small\"\n                        placeholder=\"请输入\"\n                        [clearable]=\"true\"\n                        [(value)]=\"keywords\"\n                    &gt;\n                        &lt;ng-template #prepend&gt;\n                            &lt;k-select [(value)]=\"policy\" width=\"100\" size=\"small\"&gt;\n                                &lt;k-option value=\"all\"&gt;全部策略&lt;/k-option&gt;\n                                &lt;k-option value=\"system\"&gt;系统策略&lt;/k-option&gt;\n                                &lt;k-option value=\"common\"&gt;通用策略&lt;/k-option&gt;\n                            &lt;/k-select&gt;\n                        &lt;/ng-template&gt;\n                    &lt;/k-input&gt;\n                &lt;/ng-template&gt;\n                &lt;ng-template #label let-data=\"args[0]\" let-index=\"args[1]\" let-type=\"args[2]\"&gt;\n                    &lt;div&gt;\n                        &lt;div&gt;\n                            {{ data.name }}\n                            &lt;k-tag type=\"warning\" size=\"mini\" *ngIf=\"data.policy === 'system'\"&gt;系统策略&lt;/k-tag&gt;\n                        &lt;/div&gt;\n                        &lt;p&gt;{{ data.members }}人 / {{ data.desc }}&lt;/p&gt;\n                    &lt;/div&gt;\n                &lt;/ng-template&gt;\n            &lt;/k-transfer&gt;\n            &lt;p&gt;You selected: {{ value | json }}&lt;/p&gt;\n        &lt;/div&gt;\n    `</span>,\n    styleUrls: [<span class=\"hljs-string\">'./index.styl'</span>],\n})\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">class</span> AppDemoComponent {\n    <span class=\"hljs-meta\">@ViewChild</span>(<span class=\"hljs-string\">'__test'</span>, {<span class=\"hljs-keyword\">static</span>: <span class=\"hljs-literal\">false</span>}) __test;\n\n    <span class=\"hljs-keyword\">private</span> data = [];\n    <span class=\"hljs-keyword\">private</span> value;\n    <span class=\"hljs-keyword\">private</span> _keywords;\n    <span class=\"hljs-keyword\">private</span> policy = <span class=\"hljs-string\">\"all\"</span>;\n    <span class=\"hljs-keyword\">private</span> originData;\n\n    _fetch() {\n        mockApi(<span class=\"hljs-keyword\">this</span>.policy).then(<span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> {\n            <span class=\"hljs-keyword\">this</span>.originData = data;\n            <span class=\"hljs-keyword\">this</span>._filter();\n        });\n    }\n    \n    _filter() {\n        <span class=\"hljs-keyword\">const</span> keywords = <span class=\"hljs-keyword\">this</span>.keywords;\n        <span class=\"hljs-keyword\">const</span> data = keywords ? \n            <span class=\"hljs-keyword\">this</span>.originData.filter(<span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> {\n                <span class=\"hljs-keyword\">return</span> data.name.includes(keywords);\n            }) :\n            <span class=\"hljs-keyword\">this</span>.originData;\n        <span class=\"hljs-keyword\">this</span>.data = data;\n    }\n    \n    <span class=\"hljs-keyword\">set</span> keywords(v) {\n        <span class=\"hljs-keyword\">this</span>._keywords = v;\n        <span class=\"hljs-keyword\">this</span>._filter();\n    }\n    \n    <span class=\"hljs-keyword\">get</span> keywords() {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>._keywords;\n    }\n    \n    ngOnInit() {\n        <span class=\"hljs-keyword\">this</span>._fetch();\n    }\n}</code></pre>"
        }
    ]
}